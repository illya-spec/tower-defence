<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<title>Tower Defense</title>
<style>
/* –û–°–ù–û–í–ù–Ü –°–¢–ò–õ–Ü */
/* –û–°–ù–û–í–ù–Ü –°–¢–ò–õ–Ü */
body { 
    background: #222; 
    color: #fff;      
    font-family: Arial; 
    text-align: center; 
    /* –í–∏–¥–∞–ª—è—î–º–æ –º–∞—Ä–¥–∂–∏–Ω–∏ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ—Å—Ç–æ—Ä—É –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
    margin: 0; 
    padding: 10px;
}
/* –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –ö–ù–û–ü–û–ö –¢–ê –Ü–ù–§–û (–¥–æ–ø–æ–º–∞–≥–∞—î –∑ –∫–æ–º–ø–æ–Ω—É–≤–∞–Ω–Ω—è–º –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö) */
h1, p, select, button {
    max-width: 100%;
    box-sizing: border-box;
}

/* –ö–ê–ù–í–ê–°: —Ä–æ–±–∏–º–æ –π–æ–≥–æ —á—É—Ç–ª–∏–≤–∏–º –¥–æ —Ä–æ–∑–º—ñ—Ä—É –µ–∫—Ä–∞–Ω–∞ */
canvas { 
    background: #333; 
    display: block; 
    margin: 10px auto; 
    border: 2px solid #555; 
    /* –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä 100% –≤—ñ–¥ —à–∏—Ä–∏–Ω–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    max-width: 100%; 
    /* –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Å–ø—ñ–≤–≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω 3:2 (600:400) */
    height: auto; 
}

/* –ö–ù–û–ü–ö–ò: —Ä–æ–±–∏–º–æ —ó—Ö –±—ñ–ª—å—à –∑—Ä—É—á–Ω–∏–º–∏ –¥–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è */
button, select { 
    padding: 12px 15px; /* –ó–±—ñ–ª—å—à—É—î–º–æ padding –¥–ª—è –∑—Ä—É—á–Ω–æ–≥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –ø–∞–ª—å—Ü–µ–º */
    font-size: 16px; 
    cursor: pointer; 
    margin: 5px 3px; /* –ó–º–µ–Ω—à—É—î–º–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π –º–∞—Ä–¥–∂–∏–Ω, —â–æ–± –∫–Ω–æ–ø–∫–∏ –ø–æ–º—ñ—Å—Ç–∏–ª–∏—Å—è */
    display: inline-block;
    white-space: nowrap;
}

/* –ú–ï–î–Ü–ê-–ó–ê–ü–ò–¢: –Ø–∫—â–æ —à–∏—Ä–∏–Ω–∞ –µ–∫—Ä–∞–Ω–∞ –º–∞–ª–∞ (—Ç–µ–ª–µ—Ñ–æ–Ω), —Ä–æ–±–∏–º–æ –∫–Ω–æ–ø–∫–∏ —à–∏—Ä—à–∏–º–∏ */
@media (max-width: 650px) {
    button, select {
        padding: 10px;
        font-size: 14px; /* –¢—Ä–æ—Ö–∏ –∑–º–µ–Ω—à—É—î–º–æ —à—Ä–∏—Ñ—Ç */
        margin: 5px 2px;
    }
    /* –Ø–∫—â–æ –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø–æ–º—ñ—â–∞—é—Ç—å—Å—è –≤ –æ–¥–∏–Ω —Ä—è–¥–æ–∫, –¥–æ–∑–≤–æ–ª—è—î–º–æ —ó–º –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–∏—Å—è */
    #buyTower, #buySniperTower {
        display: block; 
        width: 90%;
        margin: 5px auto;
    }
}
</style>
</head>
<body>

<h1>üõ° Tower Defense</h1>
<p>
¬† –ú–æ–Ω–µ—Ç–∏: <span id="coins">100</span> |
¬† –•–≤–∏–ª—è: <span id="wave">0</span>/10
</p>

<select id="modeSelect">
¬† <option value="normal">–ó–≤–∏—á–∞–π–Ω–∏–π —Ä–µ–∂–∏–º</option>
¬† <option value="hard">–í–∞–∂–∫–∏–π —Ä–µ–∂–∏–º</option>
</select>

<button id="startGame">‚ñ∂ –ü–æ—á–∞—Ç–∏ –≥—Ä—É</button>
<button id="restartGame">‚ü≥ –†–µ—Å—Ç–∞—Ä—Ç</button>
<button id="buyTower">–ö—É–ø–∏—Ç–∏ –≤–µ–∂—É (50)</button>
<button id="buySniperTower">–ö—É–ø–∏—Ç–∏ –°–Ω–∞–π–ø–µ—Ä—Å—å–∫—É –≤–µ–∂—É (100)</button>

<canvas id="game" width="600" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let coins = 100;
let wave = 0;
let baseHP = 100;
let gameStarted = false;
let buyingTower = false;
let buyingSniper = false;

// –ù–û–í–Ü –ó–ú–Ü–ù–ù–Ü –î–õ–Ø –í–ò–î–Ü–õ–ï–ù–ù–Ø –¢–ê –ü–†–û–î–ê–ñ–£
let selectedTower = null;
let hoveredTower = null;
const SELL_BUTTON_SIZE = 15; // –†–æ–∑–º—ñ—Ä –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–¥–∞–∂—É (—Ö—Ä–µ—Å—Ç–∏–∫–∞)

const towers = [];
const snipers = [];
const enemies = [];
const bullets = [];
const bosses = [];

const path = [
¬† {x:0, y:60},{x:200, y:60},{x:200, y:200},{x:80, y:200},
¬† {x:80, y:350},{x:350, y:350},{x:350, y:120},{x:520, y:120},
¬† {x:520, y:300},{x:600, y:300}
];
const pathWidth = 40;

let mode = "normal";
document.getElementById("modeSelect").onchange = () => {
¬† mode = document.getElementById("modeSelect").value;
};

// üü¢ –ö–Ω–æ–ø–∫–∏
document.getElementById("startGame").onclick = () => {
¬† if(!gameStarted){ gameStarted=true; wave=1; spawnWaveSequence(); }
};
document.getElementById("restartGame").onclick = () => location.reload();
document.getElementById("buyTower").onclick = () => { if(coins>=50){ buyingTower=true; selectedTower=null; } };
document.getElementById("buySniperTower").onclick = () => { if(coins>=100){ buyingSniper=true; selectedTower=null; } };

// ‚ùå –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –¥–æ—Ä—ñ–∂–∫—É
function isOnPath(x,y){
¬† for(let i=0;i<path.length-1;i++){
¬† ¬† const a=path[i], b=path[i+1];
¬† ¬† const dx=b.x-a.x, dy=b.y-a.y;
¬† ¬† const len=Math.hypot(dx,dy);
¬† ¬† const t=((x-a.x)*dx+(y-a.y)*dy)/(len*len);
¬† ¬† if(t<0||t>1) continue;
¬† ¬† const px=a.x+t*dx, py=a.y+t*dy;
¬† ¬† if(Math.hypot(x-px,y-py)<pathWidth/2) return true;
¬† }
¬† return false;
}

// üñ± –ö–ª—ñ–∫ –Ω–∞ –∫–∞–Ω–≤–∞—Å
canvas.addEventListener("click", e => {
¬† const r = canvas.getBoundingClientRect();
¬† const x = e.clientX - r.left;
¬† const y = e.clientY - r.top;
¬† 
¬† // 1. –ü–ï–†–ï–í–Ü–†–ö–ê –ù–ê–¢–ò–°–ö–ê–ù–ù–Ø –ù–ê –ö–ù–û–ü–ö–£ –ü–†–û–î–ê–ñ–£
¬† if(selectedTower){
¬† ¬† // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ö—Ä–µ—Å—Ç–∏–∫–∞ (—Ç—Ä–æ—Ö–∏ –≤–∏—â–µ –≤–µ–∂—ñ)
¬† ¬† const sellX = selectedTower.x + 10;
¬† ¬† const sellY = selectedTower.y - 15;
¬† ¬† 
¬† ¬† // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ –∫–ª—ñ–∫ –±—É–≤ –Ω–∞ —Ö—Ä–µ—Å—Ç–∏–∫—É
¬† ¬† if(x >= sellX - SELL_BUTTON_SIZE/2 && x <= sellX + SELL_BUTTON_SIZE/2 &&
¬† ¬† ¬† ¬†y >= sellY - SELL_BUTTON_SIZE/2 && y <= sellY + SELL_BUTTON_SIZE/2){
¬† ¬† ¬† 
¬† ¬† ¬† // –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ç–∏–ø –≤–µ–∂—ñ
¬† ¬† ¬† const isSniper = snipers.includes(selectedTower);
¬† ¬† ¬† 
¬† ¬† ¬† // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ 50% –≤–∞—Ä—Ç–æ—Å—Ç—ñ
¬† ¬† ¬† if (isSniper) {
¬† ¬† ¬† ¬† coins += 50; // 50% –≤—ñ–¥ 100
¬† ¬† ¬† ¬† snipers.splice(snipers.indexOf(selectedTower), 1);
¬† ¬† ¬† } else {
¬† ¬† ¬† ¬† coins += 25; // 50% –≤—ñ–¥ 50
¬† ¬† ¬† ¬† towers.splice(towers.indexOf(selectedTower), 1);
¬† ¬† ¬† }
¬† ¬† ¬† 
¬† ¬† ¬† selectedTower = null;
¬† ¬† ¬† return; // –í–∏—Ö—ñ–¥, –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –ø—Ä–æ–¥–∞–ª–∏ –≤–µ–∂—É
¬† ¬† }
¬† }

¬† // 2. –ö–£–ü–Ü–í–õ–Ø
¬† if(isOnPath(x,y)) {
    selectedTower = null; // –ó–Ω—è—Ç–∏ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è, —è–∫—â–æ –∫–ª—ñ–∫ –Ω–∞ –¥–æ—Ä—ñ–∂—Ü—ñ
    return;
  }

¬† if(buyingTower){ 
¬† ¬† towers.push({x,y,range:120,cooldown:0,stunned:0}); 
¬† ¬† coins-=50; 
¬† ¬† buyingTower=false; 
¬† }
¬† else if(buyingSniper){ 
¬† ¬† snipers.push({x,y,range:240,cooldown:0}); 
¬† ¬† coins-=100; 
¬† ¬† buyingSniper=false; 
¬† }

  // 3. –í–ò–ë–Ü–† –í–ï–ñ–Ü (—è–∫—â–æ –Ω–µ –∫—É–ø—É—î–º–æ —ñ –Ω–µ –ø—Ä–æ–¥–∞—î–º–æ)
  else {
      // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –∫–ª—ñ–∫–Ω—É–ª–∏ –Ω–∞ –≤–µ–∂—É
      const allTowers = [...towers, ...snipers];
      const clickedTower = allTowers.find(t => Math.hypot(t.x - x, t.y - y) < 15); // –†–∞–¥—ñ—É—Å –∫–ª—ñ–∫—É 15
      
      if(clickedTower){
          selectedTower = clickedTower;
      } else {
          selectedTower = null; // –ó–Ω—è—Ç–∏ –≤–∏–¥—ñ–ª–µ–Ω–Ω—è, —è–∫—â–æ –∫–ª—ñ–∫ –±—É–≤ —É –ø–æ—Ä–æ–∂–Ω—å–æ–º—É –º—ñ—Å—Ü—ñ
      }
  }
});

// üñ± –û–±—Ä–æ–±–Ω–∏–∫ —Ä—É—Ö—É –º–∏—à—ñ –¥–ª—è "–Ω–∞–≤–µ–¥–µ–Ω–Ω—è"
canvas.addEventListener("mousemove", e => {
    const r = canvas.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;

    hoveredTower = null;
    const allTowers = [...towers, ...snipers];
    const towerUnderMouse = allTowers.find(t => Math.hypot(t.x - x, t.y - y) < 15);
    
    if (towerUnderMouse) {
        hoveredTower = towerUnderMouse;
        canvas.style.cursor = 'pointer'; // –ó–º—ñ–Ω—é—î–º–æ –∫—É—Ä—Å–æ—Ä, —è–∫—â–æ –º–∏ –Ω–∞–¥ –≤–µ–∂–µ—é
    } else {
        canvas.style.cursor = 'default';
    }
});


// ‚è± –ó–∞—Ç—Ä–∏–º–∫–∞ (–±–µ–∑ –∑–º—ñ–Ω)
function sleep(ms){ return new Promise(res=>setTimeout(res,ms)); }

// üåä –°–ø–∞–≤–Ω —Ö–≤–∏–ª—å (–±–µ–∑ –∑–º—ñ–Ω)
async function spawnWave(){
¬† const incr = mode==="normal"?1:2;
¬† const total = wave*incr;
¬† const hpBase = mode==="normal"?50:50*0.75;
¬† for(let i=0;i<total;i++){
¬† ¬† enemies.push({x:path[0].x,y:path[0].y,hp:hpBase+wave*30,maxHp:hpBase+wave*30,speed:1,point:0});
¬† ¬† await sleep(400);
¬† }
¬† if(wave===10){
¬† ¬† const numBoss = mode==="normal"?1:2;
¬† ¬† for(let i=0;i<numBoss;i++){
¬† ¬† ¬† const boss={x:path[0].x,y:path[0].y,hp:500,maxHp:500,speed:0.7,point:0,lastAttack:0};
¬† ¬† ¬† enemies.push(boss); bosses.push(boss);
¬† ¬† }
¬† }
}

// –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å —Ö–≤–∏–ª—å (–∑ –∞–ª–µ—Ä—Ç–æ–º –ø—Ä–æ –ø–µ—Ä–µ–º–æ–≥—É)
async function spawnWaveSequence(){
¬† while(wave <= 10){
¬† ¬† await spawnWave();
¬† ¬† while(enemies.length > 0) await sleep(100);
¬† ¬† wave++;
¬† }
¬† 
¬† gameStarted = false; 
¬† alert("üéâ –í–Ü–¢–ê–Ñ–ú–û! –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–∞—Ö–∏—Å—Ç–∏–ª–∏ –±–∞–∑—É!");
}

// üé® –ú–∞–ª—é—î–º–æ –¥–æ—Ä—ñ–∂–∫—É (–±–µ–∑ –∑–º—ñ–Ω)
function drawPath(){
¬† ctx.strokeStyle="#555"; ctx.lineWidth=pathWidth; ctx.lineJoin="round";
¬† ctx.beginPath(); ctx.moveTo(path[0].x,path[0].y);
¬† path.forEach(p=>ctx.lineTo(p.x,p.y)); ctx.stroke();
}

// üé® –ú–ê–õ–Æ–í–ê–ù–ù–Ø –•–†–ï–°–¢–ò–ö–ê –î–õ–Ø –ü–†–û–î–ê–ñ–£
function drawSellButton(t){
    const sellX = t.x + 10;
    const sellY = t.y - 15;
    const s = SELL_BUTTON_SIZE / 2;
    
    ctx.fillStyle = "red";
    ctx.fillRect(sellX - s, sellY - s, SELL_BUTTON_SIZE, SELL_BUTTON_SIZE);
    
    // –ú–∞–ª—é—î–º–æ "X" –±—ñ–ª–∏–º –∫–æ–ª—å–æ—Ä–æ–º
    ctx.strokeStyle = "white";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(sellX - s + 2, sellY - s + 2);
    ctx.lineTo(sellX + s - 2, sellY + s - 2);
    ctx.moveTo(sellX + s - 2, sellY - s + 2);
    ctx.lineTo(sellX - s + 2, sellY + s - 2);
    ctx.stroke();

    // –î–æ–¥–∞—î–º–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø—Ä–æ–¥–∞–∂
    const sellPrice = snipers.includes(t) ? 50 : 25;
    ctx.fillStyle = "yellow";
    ctx.font = "bold 10px Arial";
    ctx.fillText(sellPrice, sellX, sellY + SELL_BUTTON_SIZE + 5);
}


// üîÑ –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª
function update(){
¬† ctx.clearRect(0,0,canvas.width,canvas.height);
¬† drawPath();

¬† // üè∞ –ó–≤–∏—á–∞–π–Ω—ñ –≤–µ–∂—ñ
¬† towers.forEach(t=>{
¬† ¬† ctx.fillStyle=t.stunned>0?"gray":"cyan";
    // –Ø–∫—â–æ –≤–µ–∂–∞ –≤–∏–¥—ñ–ª–µ–Ω–∞ –∞–±–æ –Ω–∞ –Ω–µ—ó –Ω–∞–≤–µ–¥–µ–Ω–æ –∫—É—Ä—Å–æ—Ä, –º–∞–ª—é—î–º–æ –∫–æ–ª–æ –≤–∏–±–æ—Ä—É/—Ä–µ–π–Ω–¥–∂–∞
    if(t === selectedTower || t === hoveredTower) {
        ctx.strokeStyle = "rgba(0, 255, 255, 0.5)";
        ctx.beginPath();
        ctx.arc(t.x, t.y, t.range, 0, Math.PI * 2);
        ctx.stroke();
    }
¬† ¬† ctx.beginPath(); ctx.arc(t.x,t.y,10,0,Math.PI*2); ctx.fill();
¬† ¬† 
    if(t === selectedTower) {
        drawSellButton(t);
    }
    
¬† ¬† if(t.cooldown>0) t.cooldown--; if(t.stunned>0) t.stunned--;
¬† ¬† if(t.cooldown===0 && t.stunned===0){
¬† ¬† ¬† const target=enemies.find(e=>Math.hypot(e.x-t.x,e.y-t.y)<t.range);
¬† ¬† ¬† if(target){
¬† ¬† ¬† ¬† const d=Math.hypot(target.x-t.x,target.y-t.y);
¬† ¬† ¬† ¬† bullets.push({x:t.x,y:t.y,dx:(target.x-t.x)/d*4,dy:(target.y-t.y)/d*4,magnetic:false});
¬† ¬† ¬† ¬† t.cooldown=25;
¬† ¬† ¬† }
¬† ¬† }
¬† });

¬† // üéØ –°–Ω–∞–π–ø–µ—Ä—Å—å–∫—ñ
¬† snipers.forEach(s=>{
    // –Ø–∫—â–æ —Å–Ω–∞–π–ø–µ—Ä—Å—å–∫–∞ –≤–µ–∂–∞ –≤–∏–¥—ñ–ª–µ–Ω–∞ –∞–±–æ –Ω–∞ –Ω–µ—ó –Ω–∞–≤–µ–¥–µ–Ω–æ –∫—É—Ä—Å–æ—Ä, –º–∞–ª—é—î–º–æ –∫–æ–ª–æ –≤–∏–±–æ—Ä—É/—Ä–µ–π–Ω–¥–∂–∞
    if(s === selectedTower || s === hoveredTower) {
        ctx.strokeStyle = "rgba(255, 255, 255, 0.5)";
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.range, 0, Math.PI * 2);
        ctx.stroke();
    }

¬† ¬† if(s.cooldown>0) s.cooldown--;
¬† ¬† else{
¬† ¬† ¬† const target=enemies.find(e=>Math.hypot(e.x-s.x,e.y-s.y)<s.range);
¬† ¬† ¬† if(target){ bullets.push({x:s.x,y:s.y,dx:0,dy:0,magnetic:true,target}); s.cooldown=50; }
¬† ¬† }
¬† ¬† ctx.fillStyle="white"; ctx.beginPath(); ctx.arc(s.x,s.y,12,0,Math.PI*2); ctx.fill();

    if(s === selectedTower) {
        drawSellButton(s);
    }
¬† });

¬† // üëæ –í–æ—Ä–æ–≥–∏ (–±–µ–∑ –∑–º—ñ–Ω)
¬† for(let i=enemies.length-1;i>=0;i--){
¬† ¬† const e=enemies[i];
¬† ¬† const target=path[e.point+1];
¬† ¬† if(target){
¬† ¬† ¬† const dx=target.x-e.x, dy=target.y-e.y, dist=Math.hypot(dx,dy);
¬† ¬† ¬† e.x+=dx/dist*e.speed; e.y+=dy/dist*e.speed; if(dist<2) e.point++;
¬† ¬† } else { baseHP -= bosses.includes(e)?50:10; enemies.splice(i,1); if(baseHP<=0){ alert("üõë –ë–∞–∑–∞ –∑–Ω–∏—â–µ–Ω–∞!"); location.reload(); } }

¬† ¬† if(bosses.includes(e)){
¬† ¬† ¬† ctx.fillStyle="orange"; ctx.beginPath(); ctx.moveTo(e.x,e.y-15); ctx.lineTo(e.x-15,e.y+15); ctx.lineTo(e.x+15,e.y+15); ctx.closePath(); ctx.fill();
¬† ¬† ¬† if(Date.now()-e.lastAttack>1000 && towers.length>0){ towers[Math.floor(Math.random()*towers.length)].stunned=90; e.lastAttack=Date.now(); }
¬† ¬† } else { ctx.fillStyle="red"; ctx.fillRect(e.x-10,e.y-10,20,20); }

¬† ¬† ctx.fillStyle="black"; ctx.fillRect(e.x-12,e.y-16,24,4);
¬† ¬† ctx.fillStyle="lime"; ctx.fillRect(e.x-12,e.y-16,24*(e.hp/e.maxHp),4);
¬† }

¬† // üî´ –ö—É–ª—ñ (–±–µ–∑ –∑–º—ñ–Ω)
¬† for(let bi=bullets.length-1;bi>=0;bi--){
¬† ¬† const b=bullets[bi];
    
¬† ¬† if(b.magnetic && b.target){
        if(enemies.includes(b.target)){
            const dx=b.target.x-b.x, dy=b.target.y-b.y;
            const dist=Math.hypot(dx,dy);
            b.dx=dx/dist*6; b.dy=dy/dist*6;
        } else {
            bullets.splice(bi,1);
            continue; 
        }
¬† ¬† }
¬† ¬† b.x+=b.dx; b.y+=b.dy;
¬† ¬† ctx.fillStyle="yellow"; ctx.fillRect(b.x,b.y,4,4);

¬† ¬† for(let ei=enemies.length-1;ei>=0;ei--){
¬† ¬† ¬† const e=enemies[ei];
¬† ¬† ¬† if(Math.abs(b.x-e.x)<10 && Math.abs(b.y-e.y)<10){
¬† ¬† ¬† ¬† e.hp-=20; bullets.splice(bi,1);
¬† ¬† ¬† ¬† if(e.hp<=0){
¬† ¬† ¬† ¬† ¬† const isBoss=bosses.includes(e);
¬† ¬† ¬† ¬† ¬† if(isBoss){ bosses.splice(bosses.indexOf(e),1); coins+=10; }
¬† ¬† ¬† ¬† ¬† else coins+=(mode==="hard"?8:10);
¬† ¬† ¬† ¬† ¬† enemies.splice(ei,1);
¬† ¬† ¬† ¬† }
¬† ¬† ¬† ¬† break;
¬† ¬† ¬† }
¬† ¬† }
¬† }

¬† document.getElementById("coins").innerText=coins;
¬† document.getElementById("wave").innerText=Math.min(wave,10);
¬† if(!document.getElementById("baseHP")){
¬† ¬† const p=document.createElement("p"); p.id="baseHP"; p.innerText="–ë–∞–∑–∞ HP: "+baseHP; document.body.insertBefore(p,canvas);
¬† } else document.getElementById("baseHP").innerText="–ë–∞–∑–∞ HP: "+baseHP;

¬† requestAnimationFrame(update);
}

update();
</script>


</body>
</html>